<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IO Test</title>

</head>

<body>
  <div>
    <label for="fileInput">Upload file</label>
    <input type="file" id="fileInput" accept=".json"/>
  </div>

<script>

  const fileInput = document.getElementById("fileInput");

  function getFileInfo() {
    files = []
    for (const file of fileInput.files) {
      files.push(file.name);
    }
    console.log(fileInput.value);
    console.log(`${files.length} files`);
    console.log(files);
  }

  function parseImport(text) {
    for (const marker of JSON.parse(text)) {
      console.log(marker.label);
    }
  }

  function readFile(file) {
    if (file) {
      const reader = new FileReader();
      reader.addEventListener("error", () => {
        alert("An error occurred while reading this file.");
        console.log(`Error while reading ${file.name}: ${reader.error.name}`);
      });
      reader.addEventListener("load", () => parseImport(reader.result));
      reader.readAsText(file);
    } else {
      alert("Error: file must be uploaded before it can be read.");
    }
  }

  fileInput.addEventListener("change", () => readFile(fileInput.files[0]));

</script>

</body>

</html>
<!-- reference: https://github.com/Leaflet/Leaflet/tree/main/docs/examples (BSD 2-Clause License) -->
